<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Professional CV Maker with Photo Upload</title>
<link href="style.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>

<div class="container">
  <h1>ðŸŒŸ Professional CV Maker with Photo Upload</h1>
  
  <form id="cvForm">
    <input type="text" id="name" placeholder="Full Name" required />
    <input type="email" id="email" placeholder="Email" required />
    <input type="text" id="phone" placeholder="Phone Number" required />
    <input type="text" id="address" placeholder="Address" required />
    <textarea id="summary" placeholder="Professional Summary (Short & Powerful)"></textarea>
    <textarea id="education" placeholder="Education CSV format:
S. No,Academic Qualification,College/School Name,Major Subject,Passed Year,Division
1,SLC,Baijnath H S School,Account & Economics,2069,First
2,+2 (Management),Chandra Surya Bal H S School,Account & Marketing,2073,Second
..."></textarea>
    <textarea id="experience" placeholder="Experience (one per line)"></textarea>
    <textarea id="skills" placeholder="Skills (one per line)"></textarea>
    <textarea id="certifications" placeholder="Certifications & Training (Optional, one per line)"></textarea>
    <label for="photo">Upload Your Photo:</label>
    <input type="file" id="photo" accept="image/*" />
    
    <button type="button" onclick="generateCV()">ðŸš€ Generate CV</button>
  </form>
  
  <div id="cvPreview" class="cv-preview"></div>
  <button id="downloadBtn" onclick="downloadPDF()">ðŸ“¥ Download PDF</button>
</div>

<script>
  let photoDataURL = '';

  document.getElementById('photo').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        photoDataURL = e.target.result;
      };
      reader.readAsDataURL(file);
    }
  });

  function buildEducationTable(eduText) {
    if (!eduText.trim()) return '<p>No education details provided.</p>';

    const lines = eduText.trim().split('\n');
    if (lines.length < 2) return `<p>${eduText.replace(/\n/g, '<br>')}</p>`;

    const headers = lines[0].split(',').map(h => h.trim());
    const rows = lines.slice(1);

    let table = '<table><thead><tr>';
    headers.forEach(h => {
      table += `<th>${h}</th>`;
    });
    table += '</tr></thead><tbody>';

    rows.forEach(row => {
      const cols = row.split(',').map(c => c.trim());
      table += '<tr>';
      cols.forEach(col => {
        table += `<td>${col}</td>`;
      });
      table += '</tr>';
    });

    table += '</tbody></table>';
    return table;
  }

  function generateCV() {
    const name = document.getElementById('name').value || 'Your Name';
    const email = document.getElementById('email').value || 'your.email@example.com';
    const phone = document.getElementById('phone').value || '1234567890';
    const address = document.getElementById('address').value || 'Your Address';
    const summary = document.getElementById('summary').value || 'Professional summary goes here.';
    const education = document.getElementById('education').value || '';
    const experience = document.getElementById('experience').value || '';
    const skills = document.getElementById('skills').value || '';
    const certifications = document.getElementById('certifications').value || '';

    const photoHtml = photoDataURL
      ? `<div id="photo-container"><img src="${photoDataURL}" alt="Profile Photo" /></div>`
      : '';

    const educationTableHTML = buildEducationTable(education);

    const preview = `
      <div id="cv">
        ${photoHtml}
        <h1>${name}</h1>
        <h2>Curriculum Vitae</h2>

        <section>
          <h3>Contact Information</h3>
          <p><strong>Email:</strong> ${email} | <strong>Phone:</strong> ${phone} | <strong>Address:</strong> ${address}</p>
        </section>

        <section>
          <h3>Professional Summary</h3>
          <p>${summary.replace(/\n/g, '<br>')}</p>
        </section>

        <section>
          <h3>Education</h3>
          ${educationTableHTML}
        </section>

        <section>
          <h3>Experience</h3>
          <ul class="experience-list">
            ${experience.split('\n').map(item => `<li>${item.trim()}</li>`).join('')}
          </ul>
        </section>

        <section>
          <h3>Skills</h3>
          <ul class="skills-list">
            ${skills.split('\n').map(item => `<li>${item.trim()}</li>`).join('')}
          </ul>
        </section>

        ${certifications ? `
          <section>
            <h3>Certifications & Training</h3>
            <ul class="training-list">
              ${certifications.split('\n').map(item => `<li>${item.trim()}</li>`).join('')}
            </ul>
          </section>` : ''}
      </div>
    `;

    const cvPreview = document.getElementById('cvPreview');
    cvPreview.innerHTML = preview;
    document.getElementById('downloadBtn').style.display = 'inline-block';
  }

  function downloadPDF() {
    const cvElement = document.getElementById('cv');
    if (!cvElement) {
      alert('Please generate the CV first!');
      return;
    }
    html2pdf().from(cvElement).set({
      margin: 0.5,
      filename: 'My_CV.pdf',
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
    }).save();
  }

  // Demo data on load
  window.onload = () => {
    document.getElementById('name').value = 'Kabiraj Bhatt';
    document.getElementById('email').value = 'bhattkabiraj255@gmail.com';
    document.getElementById('phone').value = '9847546823, 9812753490';
    document.getElementById('address').value = 'Shuklaphanta 01, Kanchanpur';
    document.getElementById('summary').value = `To augment my career in a Government sector where dynamism is the key concern and have enough scope to utilize my qualification along with the proper use of my vision, positive attitude, interpersonal relationship, and communication skills in order to be a part of the best practices and ideas.`;
    document.getElementById('education').value = `S. No,Academic Qualification,College/School Name,Major Subject,Passed Year,Division
1,SLC,Baijnath H S School,Account & Economics,2069,First
2,+2 (Management),Chandra Surya Bal H S School,Account & Marketing,2073,Second
3,BBS (TU),Krishna Baijnath Multiple Campus,Finance,2080,Second
4,MBS (TU),Janjyoti Multiple Campus,Finance,Running,-
5,Diploma in Civil Engineering,Shuklaphanta Polytechnic Institute,-,Running,-`;
    document.getElementById('experience').value = `10 Months as a computer operator at Shuklaphanta 01 office (Data entry for Bhumihin Dalit, Bhumihin Sukumbasi, and Ababasthith Basobasi).
45 Days as a data collector at Shuklaphanta 01 office.
2 Months as a computer operator at Shuklaphanta 04 office (Data entry for Bhumihin Dalit, Bhumihin Sukumbasi, and Ababasthith Basobasi).
1 Month as a data collector for Rastriya Janganana Bibag (2078).
3 Years as a computer operator at Bipin Books & Stationers, Dhangadhi, Kailali, Nepal.`;
    document.getElementById('skills').value = `Computer Operator
Data Entry
MS Office
Communication
Basic Mobile Repairing`;
    document.getElementById('certifications').value = `Operator in Computer Training from CCT Computer Centre.
Basic Hard & Software course in Mobile Repairing from Raj Technical Institute, Azadpur, Delhi, India.`;

    generateCV();
  };
</script>

</body>
</html>
